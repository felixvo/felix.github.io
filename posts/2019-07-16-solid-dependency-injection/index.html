<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>[SOLID] Dependency Inversion Principle | Hi</title><meta name=keywords content><meta name=description content="

High-level modules should not depend on low-level modules. Both should depend on abstractions (e.g. interfaces).
Abstractions should not depend on details. Details (concrete implementations) should depend on abstractions.
&ndash; Wikipedia

"><meta name=author content="Me"><link rel=canonical href=https://felixvo.github.io/posts/2019-07-16-solid-dependency-injection/><link crossorigin=anonymous href=/assets/css/stylesheet.1740750342264a4e69b84ddf6899fb02cc95465080d85c57c08bb1d110900bf6.css integrity="sha256-F0B1A0ImSk5puE3faJn7AsyVRlCA2FxXwIux0RCQC/Y=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://felixvo.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://felixvo.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://felixvo.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://felixvo.github.io/apple-touch-icon.png><link rel=mask-icon href=https://felixvo.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(e,o,i,a,t,n,s){e.GoogleAnalyticsObject=t,e[t]=e[t]||function(){(e[t].q=e[t].q||[]).push(arguments)},e[t].l=1*new Date,n=o.createElement(i),s=o.getElementsByTagName(i)[0],n.async=1,n.src=a,s.parentNode.insertBefore(n,s)}(window,document,'script','https://www.google-analytics.com/analytics.js','ga'),ga('create','UA-123-45','auto'),ga('send','pageview'))</script><meta property="og:title" content="[SOLID] Dependency Inversion Principle"><meta property="og:description" content="

High-level modules should not depend on low-level modules. Both should depend on abstractions (e.g. interfaces).
Abstractions should not depend on details. Details (concrete implementations) should depend on abstractions.
&ndash; Wikipedia

"><meta property="og:type" content="article"><meta property="og:url" content="https://felixvo.github.io/posts/2019-07-16-solid-dependency-injection/"><meta property="og:image" content="https://felixvo.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta property="article:section" content="posts"><meta property="og:site_name" content="ExampleSite"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://felixvo.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:title content="[SOLID] Dependency Inversion Principle"><meta name=twitter:description content="

High-level modules should not depend on low-level modules. Both should depend on abstractions (e.g. interfaces).
Abstractions should not depend on details. Details (concrete implementations) should depend on abstractions.
&ndash; Wikipedia

"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://felixvo.github.io/posts/"},{"@type":"ListItem","position":2,"name":"[SOLID] Dependency Inversion Principle","item":"https://felixvo.github.io/posts/2019-07-16-solid-dependency-injection/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"[SOLID] Dependency Inversion Principle","name":"[SOLID] Dependency Inversion Principle","description":" High-level modules should not depend on low-level modules. Both should depend on abstractions (e.g. interfaces). Abstractions should not depend on details. Details (concrete implementations) should depend on abstractions. \u0026ndash; Wikipedia ","keywords":[],"articleBody":" High-level modules should not depend on low-level modules. Both should depend on abstractions (e.g. interfaces). Abstractions should not depend on details. Details (concrete implementations) should depend on abstractions. – Wikipedia Dependency First, let’s talk about Dependency. What’s a dependencies of a class?\nIf class A change then class B also need to change -\u003e B depend on A\npackage controller class UserController { // High Level private MailSender; private FileReader; private UserDAO; } package os // Low Level class FileReader{ public read(String path) } package mail // Low Level class MailSender{} package databases // Low Level class UserDAO{} In the example above UserController depend on FileReader, MailSender and UserDAO because if one of these change, UserController also need to be change.\nif FileReader.read(String path) change to FileReader.read(Path path) so you need to update UserController to match new signature.\nOr at package level, you can say:\nPackage controller depend on packages os, mail and databases\nThe example above violate DIP because you can see High Level components depend on Low Level components\nInversion The second part is Inversion\nBoth should depend on abstractions (e.g. interfaces).\nDependency Inversion Both UserController, UserDAO, FileReader now depend on interfaces IUserDAO, IFileReader.\nBecause if IUserDAO change then UserController and UserDAO also need to change.\nWhy we need DIP So what is the benefits of Dependency Inversion?\nTesting. Now you can easily mock the dependencies of UserController class, like InMemUserDAO instead of a real MySQL UserDAO Lose Coupling. If you use UserDAO heavily, then suddenly you want to change from MySQL to MongoDB then you just need to swith the implementation (using Factory Design Pattern,…) not change the current code. Generalization restrictions All member variables in a class must be interfaces or abstracts. All concrete class packages must connect only through interface or abstract class packages. No class should derive from a concrete class. No method should override an implemented method.[1] All variable instantiation requires the implementation of a creational pattern such as the factory method or the factory pattern, or the use of a dependency-injection framework. – Wikipedia ","wordCount":"342","inLanguage":"en","datePublished":"0001-01-01T00:00:00Z","dateModified":"0001-01-01T00:00:00Z","author":{"@type":"Person","name":"Me"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://felixvo.github.io/posts/2019-07-16-solid-dependency-injection/"},"publisher":{"@type":"Organization","name":"Hi","logo":{"@type":"ImageObject","url":"https://felixvo.github.io/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add('dark'):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove('dark'):window.matchMedia('(prefers-color-scheme: dark)').matches&&document.body.classList.add('dark')</script><header class=header><nav class=nav><div class=logo><a href=https://felixvo.github.io/ accesskey=h title="Home (Alt + H)"><img src=https://felixvo.github.io/apple-touch-icon.png alt=logo aria-label=logo height=35>Home</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://felixvo.github.io/categories/ title=categories><span>categories</span></a></li><li><a href=https://felixvo.github.io/tags/ title=tags><span>tags</span></a></li><li><a href=https://example.org title=example.org><span>example.org</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://felixvo.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://felixvo.github.io/posts/>Posts</a></div><h1 class=post-title>[SOLID] Dependency Inversion Principle</h1><div class=post-meta>2 min&nbsp;·&nbsp;Me&nbsp;|&nbsp;<a href=https://github.com/felixvo/felixvo.github.io/tree/main/content/posts/2019-07-16-solid-dependency-injection.md rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><div class=post-content><blockquote><ul><li>High-level modules should not depend on low-level modules. Both should depend on abstractions (e.g. interfaces).</li><li>Abstractions should not depend on details. Details (concrete implementations) should depend on abstractions.
&ndash; <a href=https://en.wikipedia.org/wiki/Dependency_inversion_principle>Wikipedia</a></li></ul></blockquote><h2 id=dependency>Dependency<a hidden class=anchor aria-hidden=true href=#dependency>#</a></h2><p>First, let&rsquo;s talk about <code>Dependency</code>. What&rsquo;s a dependencies of a class?</p><blockquote><p>If class A change then class B also need to change -> B depend on A</p></blockquote><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kn>package</span> <span class=nn>controller</span>
</span></span><span class=line><span class=cl><span class=kd>class</span> <span class=nc>UserController</span> <span class=o>{</span> <span class=c1>// High Level
</span></span></span><span class=line><span class=cl><span class=c1></span>   <span class=kd>private</span> <span class=n>MailSender</span><span class=o>;</span>
</span></span><span class=line><span class=cl>   <span class=kd>private</span> <span class=n>FileReader</span><span class=o>;</span>
</span></span><span class=line><span class=cl>   <span class=kd>private</span> <span class=n>UserDAO</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kn>package</span> <span class=nn>os</span> <span class=c1>// Low Level
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>class</span> <span class=nc>FileReader</span><span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=nf>read</span><span class=o>(</span><span class=n>String</span> <span class=n>path</span><span class=o>)</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kn>package</span> <span class=nn>mail</span> <span class=c1>// Low Level
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>class</span> <span class=nc>MailSender</span><span class=o>{}</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kn>package</span> <span class=nn>databases</span> <span class=c1>// Low Level
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>class</span> <span class=nc>UserDAO</span><span class=o>{}</span>
</span></span></code></pre></div><p>In the example above <code>UserController</code> depend on <code>FileReader</code>, <code>MailSender</code> and <code>UserDAO</code> because if one of these change, <code>UserController</code> also need to be change.<br>if <code>FileReader.read(String path)</code> change to <code>FileReader.read(Path path)</code> so you need to update <code>UserController</code> to match new signature.</p><p>Or at package level, you can say:</p><blockquote><p>Package <code>controller</code> depend on packages <code>os</code>, <code>mail</code> and <code>databases</code></p></blockquote><p>The example above violate DIP because you can see <code>High Level components</code> depend on <code>Low Level components</code></p><h2 id=inversion>Inversion<a hidden class=anchor aria-hidden=true href=#inversion>#</a></h2><p>The second part is <code>Inversion</code></p><blockquote><p>Both should depend on abstractions (e.g. interfaces).</p></blockquote><table><thead><tr><th><strong>Dependency</strong></th></tr></thead><tbody><tr><td><img loading=lazy src=/assets/images/dip.svg alt="Dependency Inversion"></td></tr><tr><td><strong>Inversion</strong></td></tr><tr><td><img loading=lazy src=/assets/images/dip_inversion.svg alt="Dependency Inversion"></td></tr></tbody></table><p>Both <code>UserController</code>, <code>UserDAO</code>, <code>FileReader</code> now depend on interfaces <code>IUserDAO</code>, <code>IFileReader</code>.<br>Because if <code>IUserDAO</code> change then <code>UserController</code> and <code>UserDAO</code> also need to change.</p><h2 id=why-we-need-dip>Why we need DIP<a hidden class=anchor aria-hidden=true href=#why-we-need-dip>#</a></h2><p>So what is the benefits of Dependency Inversion?</p><ul><li>Testing. Now you can easily mock the dependencies of <code>UserController</code> class, like <code>InMemUserDAO</code> instead of a real <code>MySQL UserDAO</code></li><li>Lose Coupling. If you use <code>UserDAO</code> heavily, then suddenly you want to change from <code>MySQL</code> to <code>MongoDB</code> then you just need to swith the implementation (using <code>Factory Design Pattern</code>,&mldr;) not change the current code.</li></ul><h2 id=generalization-restrictions>Generalization restrictions<a hidden class=anchor aria-hidden=true href=#generalization-restrictions>#</a></h2><blockquote><ul><li>All member variables in a class must be interfaces or abstracts.</li><li>All concrete class packages must connect only through interface or abstract class packages.</li><li>No class should derive from a concrete class.</li><li>No method should override an implemented method.[1]</li><li>All variable instantiation requires the implementation of a creational pattern such as the factory method or the factory pattern, or the use of a dependency-injection framework.
&ndash; <a href=https://en.wikipedia.org/wiki/Dependency_inversion_principle#Generalization_restrictions>Wikipedia</a></li></ul></blockquote></div><footer class=post-footer><ul class=post-tags></ul><nav class=paginav><a class=prev href=https://felixvo.github.io/posts/2019-07-02-enough-cmds-to-install-arch/><span class=title>« Prev</span><br><span></span></a>
<a class=next href=https://felixvo.github.io/posts/2019-07-09-solid-open-closed/><span class=title>Next »</span><br><span>[SOLID] Open/Closed Principle</span></a></nav><div class=share-buttons><a target=_blank rel="noopener noreferrer" aria-label="share [SOLID] Dependency Inversion Principle on twitter" href="https://twitter.com/intent/tweet/?text=%5bSOLID%5d%20Dependency%20Inversion%20Principle&url=https%3a%2f%2ffelixvo.github.io%2fposts%2f2019-07-16-solid-dependency-injection%2f&hashtags="><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM195.519 424.544c135.939.0 210.268-112.643 210.268-210.268.0-3.218.0-6.437-.153-9.502 14.406-10.421 26.973-23.448 36.935-38.314-13.18 5.824-27.433 9.809-42.452 11.648 15.326-9.196 26.973-23.602 32.49-40.92-14.252 8.429-30.038 14.56-46.896 17.931-13.487-14.406-32.644-23.295-53.946-23.295-40.767.0-73.87 33.104-73.87 73.87.0 5.824.613 11.494 1.992 16.858-61.456-3.065-115.862-32.49-152.337-77.241-6.284 10.881-9.962 23.601-9.962 37.088.0 25.594 13.027 48.276 32.95 61.456-12.107-.307-23.448-3.678-33.41-9.196v.92c0 35.862 25.441 65.594 59.311 72.49-6.13 1.686-12.72 2.606-19.464 2.606-4.751.0-9.348-.46-13.946-1.38 9.349 29.426 36.628 50.728 68.965 51.341-25.287 19.771-57.164 31.571-91.8 31.571-5.977.0-11.801-.306-17.625-1.073 32.337 21.15 71.264 33.41 112.95 33.41z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share [SOLID] Dependency Inversion Principle on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&url=https%3a%2f%2ffelixvo.github.io%2fposts%2f2019-07-16-solid-dependency-injection%2f&title=%5bSOLID%5d%20Dependency%20Inversion%20Principle&summary=%5bSOLID%5d%20Dependency%20Inversion%20Principle&source=https%3a%2f%2ffelixvo.github.io%2fposts%2f2019-07-16-solid-dependency-injection%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share [SOLID] Dependency Inversion Principle on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2ffelixvo.github.io%2fposts%2f2019-07-16-solid-dependency-injection%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a></div></footer></article></main><footer class=footer><span>&copy; 2022 <a href=https://felixvo.github.io/>Hi</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById('menu');menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(t){t.preventDefault();var e=this.getAttribute("href").substr(1);window.matchMedia('(prefers-reduced-motion: reduce)').matches?document.querySelector(`[id='${decodeURIComponent(e)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(e)}']`).scrollIntoView({behavior:"smooth"}),e==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${e}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove('dark'),localStorage.setItem("pref-theme",'light')):(document.body.classList.add('dark'),localStorage.setItem("pref-theme",'dark'))})</script><script>document.querySelectorAll('pre > code').forEach(t=>{const n=t.parentNode.parentNode,e=document.createElement('button');e.classList.add('copy-code'),e.innerHTML='copy';function s(){e.innerHTML='copied!',setTimeout(()=>{e.innerHTML='copy'},2e3)}e.addEventListener('click',o=>{if('clipboard'in navigator){navigator.clipboard.writeText(t.textContent),s();return}const e=document.createRange();e.selectNodeContents(t);const n=window.getSelection();n.removeAllRanges(),n.addRange(e);try{document.execCommand('copy'),s()}catch(e){}n.removeRange(e)}),n.classList.contains("highlight")?n.appendChild(e):n.parentNode.firstChild==n||(t.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?t.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(e):t.parentNode.appendChild(e))})</script></body></html>